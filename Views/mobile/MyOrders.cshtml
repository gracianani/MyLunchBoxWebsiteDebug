@model IEnumerable<MyLunchBox.Models.Order>
           
@{
    ViewBag.Title = "MyOrders";
    Layout = "~/Views/Shared/_MobileMemberMaster.cshtml";
}

<div data-role="content">
    <h2>MyOrders</h2>
    <div class="lightBox">
        @if (Model.Count() == 0)
        {
            <h2> You haven't order anything yet, @Html.ActionLink("create one Now", "ChooseRestaurant", "CustomBentoBox")</h2>
        }
        else
        {
            foreach (var order in Model)
            {
                <div data-role="collapsible" data-collapsed="false" data-theme="a" data-content-theme="a">
                   <h3>Order# : @order.OrderId <br />
                       Order Received At : @order.OrderReceivedAt.ToString("MMM dd, yyyy hh:mm") <br />
                       @if (!string.IsNullOrEmpty(@order.TxnId))
                        {
                            <span class="label label-success">Credit Card Paid：$@(order.Gross - order.Savings) </span>
                        }
                        else if (order.Gross > order.Savings)
                        {
                            <span class="label label-warning">Cash ：<big>$@(order.Gross - order.Savings)</big> </span>
                        }
                        @if (@order.Savings > 0)
                        {
                            <span class="label label-info">Points Paid : $@order.Savings</span>
                        }
                        <a data-role="btn" href="/ShoppingCart/Edit?orderId=@order.OrderId"><i class="icon-plus icon-orange"></i>Reorder </a>
                        </h3>
                        <p class="orderRestaurant"> 
                            @order.ShortDescription
                        </p>
                        <ul class="orderItems">
                            @foreach (var orderItem in order.OrderItems)
                            {
                                <li>
                                 <span class="orderItems-desc">@orderItem.Item.ItemDescription</span>  
                                 <span class="orderItems-qty">x @orderItem.Quantity</span>
                                
                                  (<a href='@orderItem.EditUrl'> edit </a>)
                                </li>
                            }
                        </ul>
                        

                        @if (order.NeedDeliveryInfo != null)
                        {
                            @order.ReceiverFirstName <text></text> @order.ReceiverLastName <br />
                            <text>Phone :</text> @order.ReceiverPhoneNumber <br/>
                            @order.DeliveryLocation.BusinessName <text></text>
                            if (order.DeliveryLocation.University_Delivery.Count > 0)
                            {
                                @order.DeliveryLocation.University_Delivery.First().DeliveryTime.ToString("hh:mm tt")
                            }
                            <br />
                            @order.OrderReceivedAt.ToString("MMM dd, yyyy") 
                        }
                        
                        
                </div>
            }
        }
    </div>
</div>

